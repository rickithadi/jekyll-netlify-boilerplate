{% assign navurl = page.url | remove: 'index.html' %}
<nav class="navigation" role="navigation" aria-label="Main navigation">
  <div class="container">
    <a href="/" class="nav-brand">{{ site.title }}</a>
    
    <button class="nav-toggle" 
            aria-label="Toggle navigation menu" 
            aria-expanded="false"
            aria-controls="nav-menu"
            type="button">
      <span class="nav-toggle-line" aria-hidden="true"></span>
      <span class="nav-toggle-line" aria-hidden="true"></span>
      <span class="nav-toggle-line" aria-hidden="true"></span>
    </button>
    
    <div class="nav-links" id="nav-menu" role="menu">
      {% for item in include.navigation %}
      <a href="{{ item.url }}" class="{% if item.url == navurl %}active{% endif %}" {% if item.url==navurl %}
        data-current="current page" {% endif %}>
        {{ item.text }}
      </a>
      {% endfor %}
    </div>
  </div>
</nav>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const navToggle = document.querySelector('.nav-toggle');
  const navLinks = document.querySelector('.nav-links');
  const navigation = document.querySelector('.navigation');
  const body = document.body;
  
  function toggleMenu() {
    const isOpen = navLinks.classList.contains('nav-links--open');
    navLinks.classList.toggle('nav-links--open');
    navToggle.classList.toggle('nav-toggle--open');
    navigation.classList.toggle('navigation--open');
    navToggle.setAttribute('aria-expanded', !isOpen);
    
    // Prevent body scroll when menu is open
    if (!isOpen) {
      body.style.overflow = 'hidden';
    } else {
      body.style.overflow = '';
    }
  }
  
  function closeMenu() {
    navLinks.classList.remove('nav-links--open');
    navToggle.classList.remove('nav-toggle--open');
    navigation.classList.remove('navigation--open');
    navToggle.setAttribute('aria-expanded', 'false');
    body.style.overflow = '';
  }
  
  navToggle.addEventListener('click', toggleMenu);
  
  // Close menu when clicking on a link
  const links = navLinks.querySelectorAll('a');
  links.forEach(link => {
    link.addEventListener('click', closeMenu);
  });
  
  // Close menu when clicking outside
  document.addEventListener('click', function(event) {
    if (!navigation.contains(event.target) && navLinks.classList.contains('nav-links--open')) {
      closeMenu();
    }
  });
  
  // Close menu on escape key
  document.addEventListener('keydown', function(event) {
    if (event.key === 'Escape' && navLinks.classList.contains('nav-links--open')) {
      closeMenu();
    }
  });
});
</script>
